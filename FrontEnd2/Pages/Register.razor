@page "/Register"
@using BBCollection.BBObjects;
@using Newtonsoft.Json;
@using  System.Text;
@using FrontEnd2.Data;
@using System.Diagnostics;
@inject HttpClient Http
@inject Blazored.LocalStorage.ILocalStorageService localStorage
@inject AuthenticationFunctionallity uf

@if (email != "")
{
    <h1>@email</h1>
}
else
{
    <p>Loading...</p>
}

@code {
    private string _headingText;
    private string email;
    
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await GetLocalSession();
            Debug.WriteLine(email);
        }
    }

    async Task GetLocalSession()
    {
        email = await localStorage.GetItemAsync<string>("Email");
    }

}